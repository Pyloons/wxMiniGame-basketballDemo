{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\basketball.js"],"names":["cc","Class","extends","Component","properties","joyStick","type","Node","default","player","g","onLoad","shootNow","v0","t","slash","node","width","cosAngle","sinAngle","on","event","detail","deltaTime","xLine","shootAngle","x","yLine","y","director","getCollisionManager","enabled","onCollisionEnter","destroy","update","dt","moveX","moveY"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAU;AACNC,kBAAMN,GAAGO,IADH;AAENC,qBAAS;AAFH,SADF;;AAMRC,gBAAQ;AACJH,kBAAMN,GAAGO,IADL;AAEJC,qBAAS;AAFL,SANA;;AAWRE,WAAG;AAXK,KAHP;;AAiBLC,UAjBK,oBAiBI;AAAA;;AACL,aAAKC,QAAL,GAAgB,KAAhB;;AAEA;AACA,aAAKC,EAAL,GAAU,CAAV;AACA,aAAKC,CAAL,GAAS,CAAT;;AAEA,aAAKC,KAAL,GAAa,KAAKC,IAAL,CAAUC,KAAV,GAAkB,CAA/B;AACA,aAAKC,QAAL,GAAgB,CAAhB;AACA,aAAKC,QAAL,GAAgB,CAAhB;;AAEA,aAAKV,MAAL,CAAYW,EAAZ,CAAe,UAAf,EAA2B,UAACC,KAAD,EAAW;AAClC,kBAAKT,QAAL,GAAgB,IAAhB;;AAEA;AACA,kBAAKC,EAAL,GAAUQ,MAAMC,MAAN,CAAaC,SAAb,GAAyB,IAAzB,GAAgCF,MAAMC,MAAN,CAAaC,SAAb,GAAyB,GAAzD,GAA+D,IAAzE;AACA,gBAAIC,QAAQ,CAACH,MAAMC,MAAN,CAAaG,UAAb,CAAwBC,CAArC;AACA,gBAAIC,QAAQ,CAACN,MAAMC,MAAN,CAAaG,UAAb,CAAwBG,CAArC;AACA,kBAAKV,QAAL,GAAgBM,QAAQ,MAAKT,KAA7B;AACA,kBAAKI,QAAL,GAAgBQ,QAAQ,MAAKZ,KAA7B;AACH,SATD;;AAWA;AACAf,WAAG6B,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACH,KAzCI;AA2CLC,oBA3CK,8BA2Cc;AACf,aAAKhB,IAAL,CAAUiB,OAAV;AACH,KA7CI;AA+CLC,UA/CK,kBA+CEC,EA/CF,EA+CM;AACP,YAAI,KAAKvB,QAAL,IAAiB,IAArB,EAA2B;AACvB,iBAAKE,CAAL,IAAUqB,EAAV;AACA,gBAAIC,QAAQ,KAAKvB,EAAL,GAAU,KAAKK,QAAf,GAA0B,KAAKJ,CAA3C;AACA,gBAAIuB,QAAQ,KAAKxB,EAAL,GAAU,KAAKM,QAAf,GAA0B,KAAKL,CAA/B,GAAmC,KAAKJ,CAAL,GAAS,KAAKI,CAAd,GAAkB,KAAKA,CAAvB,GAA2B,CAA1E;AACA,iBAAKE,IAAL,CAAUU,CAAV,IAAeU,QAAQ,KAAKvB,EAAL,GAAU,KAAKK,QAAtC;AACA,iBAAKF,IAAL,CAAUY,CAAV,IAAeS,QAAQ,KAAKxB,EAAL,GAAU,KAAKM,QAAvB,GAAkC,KAAKT,CAAL,GAAS,KAAKI,CAA/D;AACH;AACJ;AAvDI,CAAT","file":"basketball.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        joyStick: {\r\n            type: cc.Node,\r\n            default: null\r\n        },\r\n\r\n        player: {\r\n            type: cc.Node,\r\n            default: null\r\n        },\r\n\r\n        g: 0,\r\n    },\r\n\r\n    onLoad() {\r\n        this.shootNow = false;\r\n\r\n        // 设置球的抛物线计算参数\r\n        this.v0 = 0;\r\n        this.t = 0;\r\n\r\n        this.slash = this.node.width / 2;\r\n        this.cosAngle = 0;\r\n        this.sinAngle = 0;\r\n\r\n        this.player.on('shootNow', (event) => {\r\n            this.shootNow = true;\r\n\r\n            // 计算抛物线\r\n            this.v0 = event.detail.deltaTime < 1000 ? event.detail.deltaTime / 300 : 3.33;\r\n            let xLine = -event.detail.shootAngle.x;\r\n            let yLine = -event.detail.shootAngle.y;\r\n            this.cosAngle = xLine / this.slash;\r\n            this.sinAngle = yLine / this.slash;\r\n        });\r\n\r\n        // 开启碰撞检测\r\n        cc.director.getCollisionManager().enabled = true;\r\n    },\r\n\r\n    onCollisionEnter() {\r\n        this.node.destroy();\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.shootNow == true) {\r\n            this.t += dt;\r\n            let moveX = this.v0 * this.cosAngle * this.t;\r\n            let moveY = this.v0 * this.sinAngle * this.t - this.g * this.t * this.t / 2;\r\n            this.node.x += moveX + this.v0 * this.cosAngle;\r\n            this.node.y += moveY + this.v0 * this.sinAngle - this.g * this.t;\r\n        }\r\n    },\r\n});"]}