require=function t(i,e,o){function s(n,a){if(!e[n]){if(!i[n]){var h="function"==typeof require&&require;if(!a&&h)return h(n,!0);if(c)return c(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var l=e[n]={exports:{}};i[n][0].call(l.exports,function(t){var e=i[n][1][t];return s(e||t)},l,l.exports,t,i,e,o)}return e[n].exports}for(var c="function"==typeof require&&require,n=0;n<o.length;n++)s(o[n]);return s}({JoyStick:[function(t,i,e){"use strict";cc._RF.push(i,"6fc1cxmj0BMDKRdxlUWJ0Wn","JoyStick"),cc.Class({extends:cc.Component,properties:{moveRadius:0},onLoad:function(){this.setTouchListener(),this.originPos=this.node.getPosition(),this.stickSize=this.node.getContentSize(),this.ratio=0,this.stickDistance=0,this.touchLocalX=0,this.touchLocalY=0,this.moveVec=cc.p(0,0),this.stickGo=!1},setTouchListener:function(){var t=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesBegan:function(i,e){t.node.emit("stickStart"),t.getStickStatus(i),Math.abs(t.touchLocalX)<60&&Math.abs(t.touchLocalY)<60&&(t.stickGo=!0,t.changeStickStatus())},onTouchesMoved:function(i,e){t.node.emit("stickMove"),t.node.setPosition(t.originPos.x,t.originPos.y),t.getStickStatus(i),1==t.stickGo&&t.changeStickStatus()},onTouchesEnded:function(i,e){t.node.emit("stickRelease"),t.node.setPosition(t.originPos.x,t.originPos.y),t.touchLocalX=0,t.touchLocalY=0,t.stickGo=!1,t.sendEvent()}},t.node)},getStickStatus:function(t){var i=t[0].getLocation(),e=this.node.convertToNodeSpace(i);this.touchLocalX=e.x-this.stickSize.width/2,this.touchLocalY=e.y-this.stickSize.height/2,this.stickDistance=cc.pDistance(cc.p(this.touchLocalX,this.touchLocalY),cc.p(0,0)),this.ratio=this.moveRadius/this.stickDistance},changeStickStatus:function(){this.stickDistance<=this.moveRadius?(this.node.setPositionX(this.originPos.x+this.touchLocalX),this.node.setPositionY(this.originPos.y+this.touchLocalY)):(this.node.setPositionX(this.originPos.x+this.touchLocalX*this.ratio),this.node.setPositionY(this.originPos.y+this.touchLocalY*this.ratio)),this.sendEvent()},sendEvent:function(){this.moveVec=this.returnMyCommands(),this.node.emit("VirtualStick",{moveVector:this.moveVec})},start:function(){},update:function(t){},returnMyCommands:function(){var t=this.touchLocalX*this.ratio,i=this.touchLocalY*this.ratio;return cc.p(t,i)}}),cc._RF.pop()},{}],basketball:[function(t,i,e){"use strict";cc._RF.push(i,"34832cHZO9LJqH8NhMj3r0W","basketball"),cc.Class({extends:cc.Component,properties:{joyStick:{type:cc.Node,default:null},player:{type:cc.Node,default:null},g:0},onLoad:function(){var t=this;this.shootNow=!1,this.v0=0,this.t=0,this.slash=this.node.width/2,this.cosAngle=0,this.sinAngle=0,this.player.on("shootNow",function(i){t.shootNow=!0,t.v0=i.detail.deltaTime<1e3?i.detail.deltaTime/300:3.33;var e=-i.detail.shootAngle.x,o=-i.detail.shootAngle.y;t.cosAngle=e/t.slash,t.sinAngle=o/t.slash}),cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(){this.node.destroy()},update:function(t){if(1==this.shootNow){this.t+=t;var i=this.v0*this.cosAngle*this.t,e=this.v0*this.sinAngle*this.t-this.g*this.t*this.t/2;this.node.x+=i+this.v0*this.cosAngle,this.node.y+=e+this.v0*this.sinAngle-this.g*this.t}}}),cc._RF.pop()},{}],basket:[function(t,i,e){"use strict";cc._RF.push(i,"95490ciHW5H1KLez9U34IAq","basket"),cc.Class({extends:cc.Component,onLoad:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,i){this.node.emit("plusOne")}}),cc._RF.pop()},{}],floor:[function(t,i,e){"use strict";cc._RF.push(i,"840b4HanW9Gk5rg7yGdUgqP","floor"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,i){cc.director.loadScene("main")},start:function(){}}),cc._RF.pop()},{}],player:[function(t,i,e){"use strict";cc._RF.push(i,"c451c7YeZxDo57FHHXCQ8O3","player"),cc.Class({extends:cc.Component,properties:{controller:{type:cc.Node,default:null},basketball:{type:cc.Prefab,default:null},score:{type:cc.Node,default:null}},onLoad:function(){var t=this;this.playerAction=this.getComponent(cc.Animation),this.playerAnimStatus=this.playerAction.play("playerReady"),this.deltaTime=0,this.hasReady=!0,this.hasWait=!1,this.hasShoot=!1,this.stickX=0,this.stickY=0,this.stickStart=!1,this.stickMove=!1,this.stickRelease=!1,this.controller.on("VirtualStick",function(i){0==i.detail.moveVector.x&&0==i.detail.moveVector.y||(t.stickX=i.detail.moveVector.x,t.stickY=i.detail.moveVector.y)}),this.controller.on("stickStart",function(){t.stickStart=!0}),this.controller.on("stickMove",function(){t.stickMove=!0}),this.controller.on("stickRelease",function(){t.stickRelease=!0}),this.score.on("recover",function(i){t.hasShoot&&t.stickRelease&&(t.hasReady=!0,t.hasShoot=!1,t.stickX=0,t.stickY=0)})},start:function(){},update:function(t){if(this.hasReady&&0==this.stickX&&0==this.stickY){if(this.stickStart=!1,this.stickMove=!1,this.stickRelease=!1,!this.node.children[0]){var i=cc.instantiate(this.basketball);i.getComponent("basketball").joyStick=this.controller,i.getComponent("basketball").player=this.node,this.node.addChild(i)}this.node.children[0].opacity=0,this.playerAction.play("playerReady"),this.deltaTime=Date.now()}else!this.hasReady||0==this.stickX&&0==this.stickY?this.hasWait&&this.stickRelease&&(this.deltaTime=Date.now()-this.deltaTime,this.node.emit("shootNow",{deltaTime:this.deltaTime,shootAngle:cc.p(this.stickX,this.stickY)}),this.playerAction.stop(),this.playerAction.play("playerShoot"),this.hasWait=!1,this.hasShoot=!0):(this.playerAction.stop(),this.playerAction.play("playerWait"),this.hasReady=!1,this.hasWait=!0,this.node.children[0].opacity=255)}}),cc._RF.pop()},{}],power:[function(t,i,e){"use strict";cc._RF.push(i,"ca80cexugZLMoEX8M71bhxe","power"),cc.Class({extends:cc.Component,properties:{score:{type:cc.Node,default:null},controller:{type:cc.Node,default:null}},onLoad:function(){var t=this;this.node.height=0,this.clockStart=!1,this.deltaTime=0,this.score.on("recover",function(){t.node.height=0}),this.controller.on("stickStart",function(){t.deltaTime=Date.now(),t.clockStart=!0}),this.controller.on("stickRelease",function(){t.clockStart=!1})},update:function(t){this.deltaTime=Date.now()-this.deltaTime,this.clockStart&&this.deltaTime<1e3&&(this.node.height+=200*t)}}),cc._RF.pop()},{}],score:[function(t,i,e){"use strict";cc._RF.push(i,"df4944G3ddEM61wN24UqTbp","score"),cc.Class({extends:cc.Component,properties:{basket:{type:cc.Node,default:null}},onLoad:function(){var t=this;this.score=0,this.basket.on("plusOne",function(){t.score+=1,t.node.getComponent(cc.Label).string="Combo:"+t.score.toString(),t.node.emit("recover")})}}),cc._RF.pop()},{}]},{},["JoyStick","basket","basketball","floor","player","power","score"]);